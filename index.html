<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Atendimentos NH3</title>

  <link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
/>

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Fonte DM Sans -->
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700&display=swap" rel="stylesheet" />
  <style>
    body {
      font-family: 'DM Sans', sans-serif;
    
  }    
    @keyframes fadeInOut {
      0%,
      100% {
        opacity: 0;
        transform: translateY(20px);
      }
      10%,
      90% {
        opacity: 1;
        transform: translateY(0);
      }
      
    }

    
    /* border-radius 2px para inputs, botões e textarea */
    .input-style,
    textarea,
    button,
    #toast {
      border-radius: 2px !important;
    }
    .max-w-4xl {
      border-radius: 2px !important;
    }
  </style>
</head>
<body class="bg-[rgb(37,99,235)] p-6">
<!-- Splash Screen -->
<div id="splash" class="fixed inset-0 bg-[rgb(37,99,235)] flex flex-col items-center justify-center min-h-screen p-6 text-white z-50">
  
  <!-- Título e ícone -->
  <div id="intro-text" class="flex items-center justify-center space-x-3 text-2xl font-semibold mb-12">
    <!-- Ícone clipboard -->
    <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
      <path stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a3 3 0 006 0M9 5V3h6v2" />
    </svg>
    <span>Anotações de atendimentos</span>
  </div>

  <!-- Barra de carregamento fina com efeito shimmer -->
  <div class="loader-bar bg-white/30 rounded-full w-64 h-1.5 overflow-hidden relative">
    <div class="loader-shimmer"></div>
  </div>
  

</div>

<style>
  .loader-bar {
    position: relative;
    overflow: hidden;
  }

  /* Barra base */
  .loader-bar {
    background-color: rgba(255, 255, 255, 0.3);
  }

  /* Efeito shimmer: faixa clara que passa suavemente da esquerda pra direita */
  .loader-shimmer {
    position: absolute;
    top: 0;
    left: -150%;
    height: 100%;
    width: 50%;
    background: linear-gradient(
      90deg,
      rgba(255,255,255,0) 0%,
      rgba(255,255,255,0.6) 50%,
      rgba(255,255,255,0) 100%
    );
    animation: shimmerMove 1.5s infinite;
    border-radius: 9999px;
  }

  @keyframes shimmerMove {
    0% {
      left: -50%;
    }
    100% {
      left: 150%;
    }
  }

  /* Remover setinhas em Chrome, Safari, Edge, Opera */
input[type=number]::-webkit-inner-spin-button,
input[type=number]::-webkit-outer-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

/* Remover setinhas no Firefox */
input[type=number] {
  -moz-appearance: textfield;
  appearance: textfield;
  margin: 0;
}

</style>

<script>
  window.addEventListener("load", () => {
    const splash = document.getElementById("splash");

    // Após 3 segundos, desaparece a splash com fade out suave
    setTimeout(() => {
      splash.style.transition = "opacity 700ms ease";
      splash.style.opacity = "0";
      setTimeout(() => {
        splash.style.display = "none";
      }, 700);
    }, 3000);
  });
</script>




 

<div class="fixed top-4 right-4 group z-50">
  <!-- Botão engrenagem -->
  <button
    id="btn-config"
    class="text-white p-2 rounded-full transition-transform duration-500 hover:rotate-180"
    aria-label="Configurações"
  >
    <i class="fa-solid fa-gear fa-lg"></i>
  </button>

  <!-- Tooltip -->
  <div
    class="absolute top-1/2 right-full mr-3 -translate-y-1/2 bg-gray-800 text-white text-xs rounded py-1 px-2 whitespace-nowrap opacity-0 pointer-events-none transition-opacity duration-300 group-hover:opacity-100"
  >
    Personalizações
    <!-- seta da tooltip -->
    <div class="absolute top-1/2 left-full w-2 h-2 bg-gray-800 rotate-45 -translate-y-1/2 -translate-x-1/2"></div>
  </div>
</div>

 

  <!-- Modal -->
<div
  id="modal-config"
  class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 pointer-events-none transition-opacity duration-300 z-50"
>
  <div class="bg-white rounded-lg p-6 w-96 max-w-full relative shadow-lg">
    <h2 class="text-base font-semibold mb-4 text-center">
      Por favor, insira o local da sua unidade
    </h2>

    <div class="flex items-center gap-2 mb-4">
      <input
        type="text"
        id="input-unidade"
        placeholder="Curaçá..."
        class="w-full px-4 py-2 border rounded-lg border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500"
      />
      <button
        id="btn-salvar-unidade"
        class="text-blue-600 hover:text-blue-800 transition"
        aria-label="Salvar"
      >
        <i class="fa-solid fa-check-circle text-[30px]"></i>
      </button>
    </div>

    <!-- Linha separadora -->
    <hr class="border-t border-gray-300 my-4" />

    <!-- Aqui você pode adicionar mais funcionalidades no modal -->
    <div class="text-sm text-center">
     <!-- Selecionar cor de fundo -->
<div class="mt-4">
  <!-- Selecionar cor de fundo -->
<div class="mt-4">
  <h2 class="text-base font-semibold mb-4 text-center">Escolha a cor do fundo</h2>
  <div class="flex justify-center gap-3">
    <button class="bg-red-500 w-8 h-8 rounded-full" onclick="setBgColor('bg-red-500')" aria-label="Vermelho"></button>
    <button class="bg-green-500 w-8 h-8 rounded-full" onclick="setBgColor('bg-green-500')" aria-label="Verde"></button>
    <button class="bg-blue-500 w-8 h-8 rounded-full" onclick="setBgColor('bg-blue-500')" aria-label="Azul"></button>
    <button class="bg-yellow-500 w-8 h-8 rounded-full" onclick="setBgColor('bg-yellow-500')" aria-label="Amarelo"></button>
    <button class="bg-purple-500 w-8 h-8 rounded-full" onclick="setBgColor('bg-purple-500')" aria-label="Roxo"></button>
    <button class="bg-pink-500 w-8 h-8 rounded-full" onclick="setBgColor('bg-pink-500')" aria-label="Rosa"></button>
    <button class="bg-orange-500 w-8 h-8 rounded-full" onclick="setBgColor('bg-orange-500')" aria-label="Laranja"></button>
    <button class="bg-black w-8 h-8 rounded-full" onclick="setBgColor('bg-black')" aria-label="Preto"></button>

  </div>
</div>

</div>

    </div>

    <!-- Fechar modal -->
    <button
      id="btn-close"
      class="absolute top-3 right-3 text-gray-500 hover:text-gray-700"
      aria-label="Fechar"
    >
      &times;
    </button>
  </div>
</div>


  <!-- Painel com título -->
 <div class="max-w-4xl mx-auto bg-white shadow-xl rounded-2xl p-8 ">
    <h2 class="text-2xl font-bold mb-6 text-gray-800 text-center mt-6">
      Atendimentos realizados na unidade <span id="nome-unidade"></span> - <span id="data" class="text-blue-600 "></span>
    </h2>
  

 <script>
  const btnConfig = document.getElementById('btn-config');
  const modal = document.getElementById('modal-config');
  const btnClose = document.getElementById('btn-close');
  const btnSalvar = document.getElementById('btn-salvar-unidade');
  const inputUnidade = document.getElementById('input-unidade');
  const nomeUnidade = document.getElementById('nome-unidade');

  // Abrir modal ao clicar no botão
  btnConfig.addEventListener('click', () => {
    modal.classList.remove('opacity-0', 'pointer-events-none');
    inputUnidade.value = localStorage.getItem('nomeUnidade') || '';
  });

  // Fechar modal ao clicar no botão fechar
  btnClose.addEventListener('click', () => {
    modal.classList.add('opacity-0', 'pointer-events-none');
  });

  // Função para verificar se o nome da unidade está configurado
  function verificarNomeUnidade() {
    const nomeSalvo = localStorage.getItem('nomeUnidade');
    if (!nomeSalvo || nomeSalvo.trim() === '') {
      // Abre o modal para configurar unidade se não tiver
      modal.classList.remove('opacity-0', 'pointer-events-none');
      inputUnidade.value = '';
      inputUnidade.focus();
    }
  }

  // Salvar nome da unidade e fechar modal
  btnSalvar.addEventListener('click', () => {
    const nome = inputUnidade.value.trim();
    if (nome) {
      localStorage.setItem('nomeUnidade', nome);
      nomeUnidade.textContent = nome;
      modal.classList.add('opacity-0', 'pointer-events-none');
    }
  });

  // Atualizar nome da unidade e data ao carregar a página
  window.addEventListener('DOMContentLoaded', () => {
    const nomeSalvo = localStorage.getItem('nomeUnidade') || '';
    nomeUnidade.textContent = nomeSalvo;

    const hoje = new Date();
    const dataFormatada = hoje.toLocaleDateString('pt-BR');
    document.getElementById('data').textContent = dataFormatada;

    verificarNomeUnidade();
  });

  // Função para alterar cor de fundo da página
  function setBgColor(corClasse) {
    const body = document.body;

    // Remove classes anteriores que comecem com "bg-"
    body.classList.forEach((cls) => {
      if (cls.startsWith("bg-")) body.classList.remove(cls);
    });

    // Aplica a nova cor e salva no localStorage
    body.classList.add(corClasse);
    localStorage.setItem('corFundo', corClasse);
  }

  // Aplica a cor salva ao carregar a página
  window.addEventListener("DOMContentLoaded", () => {
    const corSalva = localStorage.getItem('corFundo');
    if (corSalva) {
      document.body.classList.add(corSalva);
    }
  });
</script>

    
    
    <div id="formulario" class="space-y-4 mt-12">
      <!-- Campos numéricos -->
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
        <div class="flex justify-between items-center">
          <label>Faturas recebidas:</label>
         <input type="number" value="0" class="input-style w-24 rounded-md border border-gray-300 bg-gray-50 px-3 py-2 text-sm text-left shadow-inner focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200"
/>

        </div>
        <div class="flex justify-between items-center">
          <label>Adesão:</label>
         <input type="number" value="0" class="input-style w-24 rounded-md border border-gray-300 bg-gray-50 px-3 py-2 text-sm text-left shadow-inner focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200"
/>
        </div>
        <div class="flex justify-between items-center">
          <label>Troca de Titularidade:</label>
         <input type="number" value="0" class="input-style w-24 rounded-md border border-gray-300 bg-gray-50 px-3 py-2 text-sm text-left shadow-inner focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200"
/>
        </div>
        <div class="flex justify-between items-center">
          <label>Suspenssão do contrato:</label>
          <input type="number" value="0" class="input-style w-24 rounded-md border border-gray-300 bg-gray-50 px-3 py-2 text-sm text-left shadow-inner focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200"
/>
        </div>
        <div class="flex justify-between items-center">
          <label>Retorno de suspenssão:</label>
          <input type="number" value="0" class="input-style w-24 rounded-md border border-gray-300 bg-gray-50 px-3 py-2 text-sm text-left shadow-inner focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200"
/>
        </div>
        <div class="flex justify-between items-center">
          <label>Cancelamento:</label>
         <input type="number" value="0" class="input-style w-24 rounded-md border border-gray-300 bg-gray-50 px-3 py-2 text-sm text-left shadow-inner focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200"
/>
        </div>
        <div class="flex justify-between items-center">
          <label>Alteração de plano:</label>
          <input type="number" value="0" class="input-style w-24 rounded-md border border-gray-300 bg-gray-50 px-3 py-2 text-sm text-left shadow-inner focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200"
/>
        </div>
        <div class="flex justify-between items-center">
          <label>Alteração de vencimento:</label>
          <input type="number" value="0" class="input-style w-24 rounded-md border border-gray-300 bg-gray-50 px-3 py-2 text-sm text-left shadow-inner focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200"
/>
        </div>
        <div class="flex justify-between items-center">
          <label>Impressão de boletos:</label>
         <input type="number" value="0" class="input-style w-24 rounded-md border border-gray-300 bg-gray-50 px-3 py-2 text-sm text-left shadow-inner focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200"
/>
        </div>
        <div class="flex justify-between items-center">
          <label>Atendimento cliente retido:</label>
          <input type="number" value="0" class="input-style w-24 rounded-md border border-gray-300 bg-gray-50 px-3 py-2 text-sm text-left shadow-inner focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200"
/>
        </div>
        <div class="flex justify-between items-center">
          <label>Cobrança de inadimplentes:</label>
          <input type="number" value="0" class="input-style w-24 rounded-md border border-gray-300 bg-gray-50 px-3 py-2 text-sm text-left shadow-inner focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200"
/>
        </div>
        <div class="flex justify-between items-center">
          <label>Contestação de Fatura:</label>
          <input type="number" value="0" class="input-style w-24 rounded-md border border-gray-300 bg-gray-50 px-3 py-2 text-sm text-left shadow-inner focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200"
/>
        </div>
        <div class="flex justify-between items-center">
          <label>Indique um amigo:</label>
          <input type="number" value="0" class="input-style w-24 rounded-md border border-gray-300 bg-gray-50 px-3 py-2 text-sm text-left shadow-inner focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200"
/>
        </div>
        <div class="flex justify-between items-center">
          <label>Confirmação de Pagamento:</label>
          <input type="number" value="0" class="input-style w-24 rounded-md border border-gray-300 bg-gray-50 px-3 py-2 text-sm text-left shadow-inner focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200"
/>
        </div>
        <div class="flex justify-between items-center">
          <label>Faturar Comodato:</label>
          <input type="number" value="0" class="input-style w-24 rounded-md border border-gray-300 bg-gray-50 px-3 py-2 text-sm text-left shadow-inner focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200"
/>
        </div>
        <div class="flex justify-between items-center">
          <label>Regularização:</label>
          <input type="number" value="0" class="input-style w-24 rounded-md border border-gray-300 bg-gray-50 px-3 py-2 text-sm text-left shadow-inner focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200"
/>
        </div>
        <div class="flex justify-between items-center">
          <label>Liberação por confiança:</label>
          <input type="number" value="0" class="input-style w-24 rounded-md border border-gray-300 bg-gray-50 px-3 py-2 text-sm text-left shadow-inner focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200"
/>
        </div>
        <div class="flex justify-between items-center">
          <label>Cadastro de equipamentos na planilha:</label>
         <input type="number" value="0" class="input-style w-24 rounded-md border border-gray-300 bg-gray-50 px-3 py-2 text-sm text-left shadow-inner focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200"
/>
        </div>
        <div class="flex justify-between items-center">
          <label>Análise equipamento substituído:</label>
          <input type="number" value="0" class="input-style w-24 rounded-md border border-gray-300 bg-gray-50 px-3 py-2 text-sm text-left shadow-inner focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200"
/>
        </div>
        <div class="flex justify-between items-center">
          <label>Envio de código pix:</label>
          <input type="number" value="0" class="input-style w-24 rounded-md border border-gray-300 bg-gray-50 px-3 py-2 text-sm text-left shadow-inner focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200"
/>
        </div>
        <div class="flex justify-between items-center">
          <label>Solicitação Aplicativos Kasatech (App's)</label>
          <input type="number" value="0" class="input-style w-24 rounded-md border border-gray-300 bg-gray-50 px-3 py-2 text-sm text-left shadow-inner focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200"
/>
        </div>
        <div class="flex justify-between items-center">
          <label>Criação de usuário app kasatech:</label>
          <input type="number" value="0" class="input-style w-24 rounded-md border border-gray-300 bg-gray-50 px-3 py-2 text-sm text-left shadow-inner focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200"
/>
        </div>
        <div class="flex justify-between items-center">
          <label>Taxa mudança de endereço:</label>
         <input type="number" value="0" class="input-style w-24 rounded-md border border-gray-300 bg-gray-50 px-3 py-2 text-sm text-left shadow-inner focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200"
/>
        </div>
        <div class="flex justify-between items-center">
          <label>Outras questões financeiras:</label>
          <input type="number" value="0" class="input-style w-24 rounded-md border border-gray-300 bg-gray-50 px-3 py-2 text-sm text-left shadow-inner focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200"
/>
        </div>
        <div class="flex justify-between items-center">
          <label>Pagamento invertido:</label>
         <input type="number" value="0" class="input-style w-24 rounded-md border border-gray-300 bg-gray-50 px-3 py-2 text-sm text-left shadow-inner focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200"
/>
        </div>
      </div>

      <!-- Suporte -->
      <div>
        <label class="block font-medium text-gray-700 mb-1 mt-6">Suporte (digite manualmente):</label>
       <textarea
  id="suporte"
  placeholder="Ex: conexão lenta, mudança de endereço..."
  class="w-full p-3 rounded-md border border-gray-300 resize-y focus:outline-none focus:ring-2 focus:ring-blue-400 focus:shadow-lg transition-shadow duration-300 min-h-[100px]"
></textarea>

      </div>

      <!-- Limpeza -->
      <div class="mt-4">
        <label class="block font-medium text-gray-700 mb-1">Limpeza da Loja:</label>
        <label class="mr-4"><input type="radio" name="limpeza" value="Sim" checked /> Sim</label>
        <label><input type="radio" name="limpeza" value="Não" /> Não</label>
      </div>
    </div>

    <div class="mt-8 flex flex-wrap gap-4">
  <!-- Botão Limpar -->
  <button
    onclick="zerar()"
    class="bg-rose-500 hover:bg-rose-600 text-white px-6 py-2 rounded-lg font-medium shadow-md transition-all duration-300"
  >
    Limpar
  </button>

  <!-- Botão Copiar -->
  <button
    onclick="copiar()"
    class="bg-gradient-to-r from-cyan-500 to-blue-600 hover:from-cyan-600 hover:to-blue-700 text-white px-6 py-2 rounded-lg font-medium shadow-md transition-all duration-300"
  >
    Copiar e fazer backup
  </button>
</div>


<footer class="mt-12 py-4 bg-white text-center text-gray-600 flex flex-col items-center justify-center gap-1 border-t border-gray-200 relative z-0">
  <span>© 2025 Alex Leontino. Criado com 
    <span class="animate-pulse text-red-500 font-semibold">💙</span> para você.
  </span>
  <div class="text-xs text-gray-400 flex items-center space-x-2">
    <span>Versão 1.1</span>
    <button onclick="toggleChangelog()" class="underline hover:text-blue-600 transition font-medium">Changelog</button>
  </div>

  <!-- Modal -->
  <div id="changelogModal" 
     class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 hidden"
     style="height:100vh; width:100vw; top:0; left:0;">
    <div class="bg-white w-full max-w-2xl mx-auto rounded-xl shadow-lg p-6 relative text-left">
      <h2 class="text-lg font-semibold text-gray-800 border-b pb-3 mb-4">Changelog</h2>
      
      <div class="max-h-96 overflow-y-auto pr-2 text-sm text-gray-700 space-y-6">
  <!-- Versão 1.1 -->
  <div>
    <div class="flex justify-between items-center">
      <strong class="text-base text-gray-800">Versão 1.1</strong>
      <span class="text-xs text-gray-400">16/07/2025</span>
    </div>
    <ul class="list-disc pl-5 mt-2 space-y-1">
      <li>Adicionado changelog com modal profissional</li>
      <li>Reestilização do rodapé com versão clicável</li>
      <li>Melhoria na responsividade do formulário</li>
      <li>Ajuste na centralização de elementos visuais</li>
    </ul>
  </div>

  <!-- Versão 1.0 -->
  <div>
    <div class="flex justify-between items-center">
      <strong class="text-base text-gray-800">Versão 1.0</strong>
      <span class="text-xs text-gray-400">14/07/2025</span>
    </div>
    <ul class="list-disc pl-5 mt-2 space-y-1">
      <li>Splash screen com título e barra de carregamento animada</li>
      <li>Formulário com campos organizados e responsivos</li>
      <li>Estilo moderno com Tailwind CSS e fonte DM Sans</li>
      <li>Persistência de dados com localStorage</li>
      <li>Botões de ação: zerar e copiar dados</li>
      <li>Exportação automática em formato .txt</li>
      <li>Toast de feedback ao copiar</li>
    </ul>
  </div>
</div>


      <button onclick="toggleChangelog()" class="absolute top-4 right-4 text-gray-400 hover:text-gray-700 text-xl font-bold leading-none">&times;</button>
    </div>
  </div>
</footer>

<script>
  function toggleChangelog() {
    const modal = document.getElementById("changelogModal");
    modal.classList.toggle("hidden");
  }
</script>




  </div>

  <!-- Notificação Toast -->
  <div
    id="toast"
    class="fixed bottom-6 right-6 bg-green-600 text-white px-5 py-3 rounded-lg shadow-lg opacity-0 pointer-events-none"
  >
    Texto copiado & backup realizado com sucesso!
  </div>

<style>
  .input-style {
    @apply border border-gray-300 px-3 py-1 text-left focus:outline-none focus:ring-2 focus:ring-blue-400 rounded-sm;
    width: 45px;
  }
  textarea,
  button,
  #toast {
    border-radius: 2px !important;
  }
  .max-w-4xl {
    border-radius: 2px !important;
  }
</style>




  <script>
    function formatarDataHoje() {
      const hoje = new Date();
      const dia = String(hoje.getDate()).padStart(2, "0");
      const mes = String(hoje.getMonth() + 1).padStart(2, "0");
      const ano = hoje.getFullYear();
      return `${dia}/${mes}/${ano}`;
    }

    document.getElementById("data").textContent = formatarDataHoje();

    function zerar() {
      document.querySelectorAll("input[type='number']").forEach((input) => (input.value = 0));
      document.getElementById("suporte").value = "";
      localStorage.removeItem("dados");
    }

    function copiar() {
  const data = document.getElementById("data").textContent;
  // Pega o nome da unidade salvo no localStorage (ou vazio se não existir)
  const nomeUnidadeSalvo = localStorage.getItem('nomeUnidade') || '';
  
  // Ajusta o texto inicial com o nome da unidade e data
  let texto = `Atendimentos realizados na unidade ${nomeUnidadeSalvo} - ${data}\n\n`;

  // Seleciona todos os campos numéricos dentro da grid do formulário
  const items = Array.from(document.querySelectorAll("#formulario > .grid > div"));

  for (let i = 0; i < items.length; i++) {
    const label = items[i].querySelector("label").textContent.trim().replace(":", "");
    const input = items[i].querySelector("input[type='number']");
    if (!input) continue;

    texto += `${label}: ${input.value.toString().padStart(2, "0")}\n`;

    // Se for "Cobrança de inadimplentes", adiciona o texto do suporte
    if (label === "Cobrança de inadimplentes") {
      const suporteTexto = document.getElementById("suporte").value.trim();
      if (suporteTexto) {
        texto +=
          "Suporte:\n" +
          suporteTexto
            .split("\n")
            .map((l) => " " + l)
            .join("\n") +
          "\n";
      }
    }
  }

  // Adiciona o status da limpeza da loja
  const limpeza = document.querySelector("input[name='limpeza']:checked").value;
  texto += `\nLimpeza da Loja\nSim (${limpeza === "Sim" ? "x" : " "}) Não (${limpeza === "Não" ? "x" : " "})`;

  // Copiar texto para área de transferência e mostrar toast
  const area = document.getElementById("resultado");
  if (area) {
    area.value = texto;
    area.select();
    document.execCommand("copy");
  } else {
    navigator.clipboard.writeText(texto).catch(() => {
      alert("Erro ao copiar para área de transferência");
    });
  }

  showToast();

  // Baixar o arquivo com o texto
  baixarArquivo(texto, `Atendimentos realizados na unidade ${nomeUnidadeSalvo.replace(/\s+/g, '_')} ${new Date().toLocaleDateString('pt-BR').replace(/\//g, '_')}.txt`);
}



    function showToast() {
      const toast = document.getElementById("toast");
      toast.classList.remove("opacity-0", "pointer-events-none");
      toast.classList.add("opacity-100");
      toast.style.animation = "fadeInOut 3s forwards";

      setTimeout(() => {
        toast.classList.add("opacity-0", "pointer-events-none");
        toast.classList.remove("opacity-100");
        toast.style.animation = "";
      }, 3000);
    }

    // Função para baixar arquivo txt
    function baixarArquivo(texto, nomeArquivo) {
      const blob = new Blob([texto], { type: "text/plain" });
      const url = URL.createObjectURL(blob);

      const a = document.createElement("a");
      a.href = url;
      a.download = nomeArquivo;
      document.body.appendChild(a);
      a.click();

      setTimeout(() => {
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
      }, 0);
    }

    // Salvar dados no localStorage
    function salvarDados() {
      const dados = {};

      document.querySelectorAll("#formulario input[type='number']").forEach((input) => {
        const label = input.previousElementSibling.textContent.trim().replace(":", "");
        dados[label] = input.value;
      });

      dados["Suporte"] = document.getElementById("suporte").value;

      dados["Limpeza"] = document.querySelector("input[name='limpeza']:checked").value;

      localStorage.setItem("dados", JSON.stringify(dados));
    }

    // Recuperar dados do localStorage e preencher inputs
    function carregarDados() {
      const dados = JSON.parse(localStorage.getItem("dados"));
      if (!dados) return;

      document.querySelectorAll("#formulario input[type='number']").forEach((input) => {
        const label = input.previousElementSibling.textContent.trim().replace(":", "");
        if (dados[label] !== undefined) {
          input.value = dados[label];
        }
      });

      if (dados["Suporte"] !== undefined) {
        document.getElementById("suporte").value = dados["Suporte"];
      }

      if (dados["Limpeza"] !== undefined) {
        const limpeza = dados["Limpeza"];
        document.querySelectorAll('input[name="limpeza"]').forEach((radio) => {
          radio.checked = radio.value === limpeza;
        });
      }
    }

    // Salva sempre que algo mudar
    document.querySelectorAll('#formulario input[type="number"], #suporte, input[name="limpeza"]').forEach((el) => {
      el.addEventListener("input", salvarDados);
      el.addEventListener("change", salvarDados);
    });

    // Carrega os dados ao abrir a página
    window.addEventListener("load", () => {
      carregarDados();
    });


    function verificarNomeUnidade() {
  const nomeSalvo = localStorage.getItem('nomeUnidade');
  if (!nomeSalvo || nomeSalvo.trim() === '') {
    // Abre a modal automaticamente
    modal.classList.remove('opacity-0', 'pointer-events-none');
    inputUnidade.value = '';
    inputUnidade.focus();
  }
}

  </script>
  
</body>
</html>
